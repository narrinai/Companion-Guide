# üåç CompanionGuide.ai Translation Guide

## Quick Start

### 1. Get Anthropic API Key

1. Go to https://console.anthropic.com/
2. Sign up / Log in
3. Create an API key
4. Copy the key (starts with `sk-ant-...`)

### 2. Set API Key

**Option A: Temporary (this session only)**
```bash
export ANTHROPIC_API_KEY="sk-ant-your-key-here"
```

**Option B: Permanent (add to your shell profile)**
```bash
echo 'export ANTHROPIC_API_KEY="sk-ant-your-key-here"' >> ~/.zshrc
source ~/.zshrc
```

### 3. Test with One Page

```bash
npm run translate:test
```

This will show you a preview of what will be translated WITHOUT creating any files.

### 4. Translate One Page

```bash
node scripts/translate-companion-pages.js --file=character-ai
```

Check the result at: `nl/companions/character-ai.html`

### 5. Translate All 42 Pages

```bash
npm run translate:companions
```

**Cost:** ~$0.50 - $1.00 for all pages
**Time:** ~5-10 minutes

## Commands Reference

| Command | Description |
|---------|-------------|
| `npm run translate:test` | Dry-run test with character-ai (no files created) |
| `npm run translate:companions` | Translate all 42 companion pages to Dutch |
| `node scripts/translate-companion-pages.js --file=replika-ai` | Translate single page |
| `npm run translate:force` | Re-translate all (overwrite existing) |

## What Gets Translated

‚úÖ **All visible text content:**
- Hero sections & descriptions
- Feature lists (all 6 features)
- Pros & Cons
- "Our Verdict" section
- "What is X?" sections
- Pricing descriptions
- FAQ questions & answers
- UI buttons ("Visit Website", etc.)
- All body paragraphs

‚ùå **What stays unchanged:**
- Brand names (Character.AI, Replika, etc.)
- Technical terms (API, AI, etc.)
- Code blocks & scripts
- Dynamic ratings (Airtable)
- Navigation structure
- Image URLs

## How It Works

```
1. Read English HTML
   ‚Üì
2. Extract all translatable text
   ‚Üì
3. Send to Claude AI in batches
   ‚Üì
4. Apply translations to HTML
   ‚Üì
5. Update metadata (lang, canonical, hreflang)
   ‚Üì
6. Save to /nl/companions/*.html
```

## Verifying Translations

### Check a translated page:

1. **Open in browser:**
   ```bash
   open nl/companions/character-ai.html
   ```

2. **Or start dev server:**
   ```bash
   npm run dev
   ```
   Visit: http://localhost:8888/nl/companions/character-ai

3. **Check metadata:**
   ```bash
   head -50 nl/companions/character-ai.html | grep -E '(lang=|canonical|hreflang)'
   ```

## Updating Translations

When you edit English pages:

```bash
# Delete old Dutch version
rm nl/companions/character-ai.html

# Re-translate
node scripts/translate-companion-pages.js --file=character-ai
```

## Adding More Languages

### German (de):
```bash
node scripts/translate-companion-pages.js --lang=de
```

### French (fr):
```bash
node scripts/translate-companion-pages.js --lang=fr
```

### Spanish (es):
```bash
node scripts/translate-companion-pages.js --lang=es
```

Then add language to:
1. `locales/[lang].json` - UI translations
2. Airtable `Companion_Translations` table
3. `netlify.toml` - redirects

## Cost Breakdown

| Task | Pages | Tokens | Cost |
|------|-------|--------|------|
| Test (dry-run) | 1 | 0 | $0.00 |
| Single page | 1 | ~3,000 | $0.01 |
| All pages | 42 | ~120,000 | $0.50-$1.00 |

**Claude 3.5 Sonnet pricing:**
- Input: $3 per 1M tokens
- Output: $15 per 1M tokens

## Troubleshooting

### Error: "ANTHROPIC_API_KEY not set"

```bash
# Check if set
echo $ANTHROPIC_API_KEY

# If empty, set it:
export ANTHROPIC_API_KEY="sk-ant-..."
```

### Error: "Cannot find module 'jsdom'"

```bash
npm install
```

### Translations look wrong

1. Check dry-run output first:
   ```bash
   npm run translate:test
   ```

2. Look at console logs for warnings

3. Test with single page before running all:
   ```bash
   node scripts/translate-companion-pages.js --file=character-ai
   ```

### Rate limit errors

The script has built-in delays (500ms between batches). If you still hit limits:
- Wait a few minutes
- Check your API tier at https://console.anthropic.com/

## Build Integration

To run during Netlify build, add to `netlify.toml`:

```toml
[build]
  command = "npm run translate:companions"
  publish = "."
```

**Note:** You'll need to set `ANTHROPIC_API_KEY` in Netlify environment variables.

## File Structure

```
companions/              # English originals (42 files)
  character-ai.html
  replika-ai.html
  ...

nl/companions/          # Dutch translations (42 files)
  character-ai.html     # Generated by script
  replika-ai.html
  ...

scripts/
  translate-companion-pages.js  # Translation script
  README-translation.md         # Technical docs
```

## Quality Control

The script:
- ‚úÖ Uses Claude 3.5 Sonnet (highest quality)
- ‚úÖ Provides context: "AI companion platform reviews"
- ‚úÖ Preserves technical terminology
- ‚úÖ Maintains tone and formality
- ‚úÖ Batch translates for consistency

For best results:
1. Review first few pages manually
2. Adjust `skipSelectors` if needed
3. Check that dynamic elements still work (ratings, etc.)

## Support

Issues? Check:
1. `scripts/README-translation.md` - Technical details
2. Console output for specific errors
3. Generated HTML for structure issues

## Next Steps

After translation:
1. ‚úÖ Test all 42 pages in browser
2. ‚úÖ Verify SEO metadata (canonical, hreflang)
3. ‚úÖ Check Airtable integration (ratings still work?)
4. ‚úÖ Test navigation links
5. ‚úÖ Deploy to Netlify
6. ‚úÖ Submit to Google Search Console

---

**Ready?** Start with: `npm run translate:test` üöÄ
